---
config:
  transport: ssh
  ssh:
    host-key-check: false
    run-as: root
groups:
  - name: peadm_nodes
    targets:
      - _plugin: terraform
        dir: .terraform/azure_pe_arch
        resource_type: azurerm_linux_virtual_machine.server
        target_mapping:
          name: tags.internal_fqdn
          uri: public_ip_address
      - _plugin: terraform
        dir: .terraform/azure_pe_arch
        resource_type: azurerm_linux_virtual_machine.compiler
        target_mapping:
          name: tags.internal_fqdn
          uri: public_ip_address
      - _plugin: terraform
        dir: .terraform/azure_pe_arch
        resource_type: azurerm_linux_virtual_machine.psql
        target_mapping:
          name: tags.internal_fqdn
          uri: public_ip_address
  - name: agent_nodes
    targets:
      - _plugin: terraform
        dir: .terraform/azure_pe_arch
        resource_type: azurerm_linux_virtual_machine.node
        target_mapping:
          name: tags.internal_fqdn
          uri: public_ip_address
